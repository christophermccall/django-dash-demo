<!DOCTYPE html>
<html lang="en">

<head>
    <title>Login Page</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">

    <!-- Load External CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'dashboard/login.css' %}">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body>
    <div class="background">
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- <style>
        body {
            background-color: #080710 !important;
        }
    </style> -->

    <form method="post">
        <h3>Login Here</h3>
        {% csrf_token %}
        <label for="username">Username</label>
        <input type="text" placeholder="Enter Username" id="username" name="username">

        <label for="password">Password</label>
        <div class="password-container">
            <input type="password" placeholder="Password" id="password" name="pass">
            <span class="toggle-password" onclick="togglePassword('password', this)">
                <i class="fas fa-eye"></i>
            </span>
        </div>

        <button type="submit">Log In</button>
        <a href="{% url 'signup' %}">Create an account</a>
    </form>

    <!-- Bootstrap Toast Notification Container -->
    <!-- {% if messages %}
    <div class="toast-container" id="toastContainer">
        {% for message in messages %}
        <div class="toast show {{ message.tags }}" role="alert"> 
            <span class="toast-body">{{ message }}</span>
            <button type="button" class="close-btn" onclick="closeToast(this)">&times;</button>
        </div>             
    {% endfor %}
    </div>
    {% endif %} -->

    {% if messages %}
    <div class="toast-container" id="toastContainer">
        {% for message in messages %}
        <div class="toast show bg-{{ message.tags }}" role="alert"> 
            <div class="toast-body d-flex justify-content-between align-items-center"> 
                <span class="toast-message">{{ message }}</span>
                
            </div>
                <button type="button" class="close-btn" onclick="closeToast(this)">&times;</button>
        </div>             
    {% endfor %}
    </div>
    {% endif %}
    
    <script>
        // Automatically close toast notifications after 3 seconds
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                document.querySelectorAll(".toast").forEach(toast => {
                    toast.style.opacity = "0";
                    setTimeout(() => toast.remove(), 300); // Remove after fade-out
                });
            }, 3000); // 3 seconds
        });

        function closeToast(button) {
            let toast = button.closest(".toast");
            toast.style.opacity = "0";
            setTimeout(() => toast.remove(), 300);
        }
    </script>

    <script>
        function togglePassword(fieldId, iconSpan) {
            let passwordField = document.getElementById(fieldId);
            let icon = iconSpan.querySelector("i");
            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash");
            } else {
                passwordField.type = "password";
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye");
            }
        }
    </script>
    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            let messages = JSON.parse('{{ messages|safe }}');  // Ensure messages are passed correctly
            let toastContainer = document.getElementById("toastContainer");
        
            if (messages.length > 0) {
                messages.forEach((msg) => {
                    let toastDiv = document.createElement("div");
                    toastDiv.className = `toast show bg-${msg.tags}`;
                    toastDiv.role = "alert";
                    toastDiv.innerHTML = `
                        <div class="toast-body">
                            ${msg.message}
                            <button type="button" class="close-btn" onclick="closeToast(this)">
                                &times;
                            </button>
                        </div>`;
                    toastContainer.appendChild(toastDiv);
                });
            }
        });
        </script> -->


    <!-- JavaScript to Show Toasts Automatically -->
    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            let toastElList = document.querySelectorAll('.toast');
            toastElList.forEach(toastEl => {
                let toast = new bootstrap.Toast(toastEl);
                toast.show();
            });
        });
    </script> -->

    <!-- <script>
        function closeToast(button) {
            button.parentElement.parentElement.style.display = "none";
        }
    </script> -->

</body>
</html>